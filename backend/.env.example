# ============================================================================
# Kanbox Backend Environment Configuration
# ============================================================================
# This file contains environment variable templates for the backend server.
# Copy this file to .env and fill in your actual values.
#
# IMPORTANT: Never commit the .env file to version control!
# The .env file contains sensitive credentials and should be listed in .gitignore
# ============================================================================

# ----------------------------------------------------------------------------
# Application Environment
# ----------------------------------------------------------------------------
# Determines the runtime environment and behavior
# Options: "development" | "production" | "test"
#
# - development: Enables detailed error messages, Morgan logging, hot reload
# - production: Optimized for performance, minimal logging, error sanitization
# - test: Used for running automated tests (not currently configured)
#
NODE_ENV="development"

# ----------------------------------------------------------------------------
# Server Configuration
# ----------------------------------------------------------------------------
# Port number for the Express server to listen on
# Default: 3000 (common for Node.js applications)
# Production: Often set by hosting provider (e.g., process.env.PORT)
#
PORT=3000

# Frontend URL for CORS (Cross-Origin Resource Sharing) configuration
# This allows your frontend to make API requests to this backend
#
# Development: http://localhost:5173 (Vite default port)
# Production: https://your-deployed-frontend-domain.com
#
# Note: Must match exactly where your frontend is served from
#
CORS_ORIGIN="http://localhost:5173"

# ----------------------------------------------------------------------------
# Authentication Configuration
# ----------------------------------------------------------------------------
# Secret key used for signing and verifying JWT (JSON Web Tokens)
#
# SECURITY CRITICAL: This must be a strong, random, secret string
# - Minimum 32 characters recommended
# - Use cryptographically random values
# - NEVER use predictable values like "secret" or "password"
# - Different value for each environment (dev, staging, production)
#
# Generate a secure secret with one of these methods:
#   Node.js:  node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#   OpenSSL:  openssl rand -hex 32
#   Online:   https://randomkeygen.com/ (use "CodeIgniter Encryption Keys")
#
# Example output: 4f3d8b9e1c7a2f6d8e3b5a1c7d9f2e4a6b8c1d3e5f7a9b2c4d6e8f1a3b5c7d9e
#
JWT_SECRET="your_jwt_secret_here_CHANGE_THIS_IN_PRODUCTION"

# ----------------------------------------------------------------------------
# MongoDB Configuration
# ----------------------------------------------------------------------------
# MongoDB connection credentials and database name
#
# For Docker Compose setup (recommended for development):
#   Username: admin
#   Password: Choose a secure password (different from default!)
#   Database: kanbox_development (or your preferred name)
#
MONGO_USERNAME="admin"
MONGO_PASSWORD="your_secure_password_here"
MONGO_DATABASE="kanbox_development"

# Full MongoDB connection URI
# This is the complete connection string used by Mongoose to connect to MongoDB
#
# Format: mongodb://[username]:[password]@[host]:[port]/[database]?[options]
#
# Common Scenarios:
#
# 1. Local Docker Container (when backend runs on host, MongoDB in container):
#    mongodb://admin:password@localhost:27017/kanbox_development?authSource=admin
#
# 2. Docker Compose (both backend and MongoDB in containers):
#    mongodb://admin:password@mongodb:27017/kanbox_development?authSource=admin
#    (Note: "mongodb" is the service name defined in docker-compose.yml)
#
# 3. MongoDB Atlas (cloud-hosted, recommended for production):
#    mongodb+srv://username:password@cluster0.xxxxx.mongodb.net/kanbox?retryWrites=true&w=majority
#    (Get this URL from your MongoDB Atlas dashboard)
#
# 4. Local MongoDB instance (without Docker):
#    mongodb://localhost:27017/kanbox_development
#
# Query Parameters Explained:
#   - authSource=admin: Specifies the database for authentication
#   - retryWrites=true: Automatically retry failed write operations
#   - w=majority: Write concern - wait for majority of nodes to acknowledge
#
MONGODB_URI="mongodb://admin:your_secure_password@localhost:27017/kanbox_development?authSource=admin"

# ----------------------------------------------------------------------------
# Cloudinary Configuration
# ----------------------------------------------------------------------------
# Cloudinary is used for storing and serving user-uploaded images (card attachments)
# Sign up for free at: https://cloudinary.com
# Free tier includes: 25GB storage, 25GB monthly bandwidth, 25 monthly credits
#
# Find your credentials at: https://console.cloudinary.com/console
# Dashboard → Account Details → API Keys
#
# Required for:
#   - Uploading card cover images
#   - Storing card attachments
#   - Profile pictures (if implemented)
#
# Cloud Name: Your Cloudinary account identifier (e.g., "my-company")
# API Key: Public key for API authentication (can be exposed in frontend)
# API Secret: Private key for API authentication (NEVER expose to frontend!)
#
CLOUDINARY_CLOUD_NAME="your_cloudinary_cloud_name"
CLOUDINARY_API_KEY="your_cloudinary_api_key"
CLOUDINARY_API_SECRET="your_cloudinary_api_secret"

# Optional: Specify a folder for uploaded files
# This helps organize your Cloudinary media library
# Example: "kanbox/attachments" or "production/uploads"
#
CLOUDINARY_FOLDER="kanbox/attachments"

# Alternative Configuration Method: Full Cloudinary URL
# This single URL contains all the above credentials in one string
# Format: cloudinary://API_KEY:API_SECRET@CLOUD_NAME
#
# You can use either the individual variables above OR this URL
# If both are provided, individual variables take precedence
#
# CLOUDINARY_URL="cloudinary://your_api_key:your_api_secret@your_cloud_name"

# ============================================================================
# ADDITIONAL NOTES
# ============================================================================
#
# 1. Environment Variables in Code:
#    Access these in Node.js code via: process.env.VARIABLE_NAME
#    Example: const port = process.env.PORT;
#
# 2. Loading Environment Variables:
#    This project uses the 'dotenv' package to load .env file
#    Variables are loaded in: src/config/env.js
#
# 3. Docker Compose Considerations:
#    When using docker-compose.yml, you can also set environment variables there
#    .env file variables can be referenced in docker-compose.yml with ${VAR_NAME}
#
# 4. Production Deployment:
#    - Use your hosting provider's environment variable configuration
#    - Most platforms (Render, Railway, Heroku) have a settings panel for this
#    - Never commit production credentials to version control
#    - Consider using a secret management service for extra security
#
# 5. Security Checklist:
#    ☐ Changed JWT_SECRET to a strong random value
#    ☐ Set secure MongoDB password (not "password" or "123456")
#    ☐ Added .env to .gitignore (already done in this project)
#    ☐ Different credentials for development and production
#    ☐ Cloudinary API secret is kept private (never in frontend code)
#
# 6. Troubleshooting:
#    - If backend won't start: Check MongoDB connection string format
#    - If CORS errors: Verify CORS_ORIGIN matches frontend URL exactly
#    - If JWT errors: Ensure JWT_SECRET is set and consistent
#    - If upload fails: Verify Cloudinary credentials are correct
#
# ============================================================================
